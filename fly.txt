openDataServer(5400)
connectControlClient("127.0.0.1",5402)
var warp -> simPath("/simPath/time/warp")
var magnetos -> simPath("/controls/switches/magnetos")
var throttle -> simPath("/controls/engines/current-engine/throttle")
var mixture -> simPath("/controls/engines/current-engine/mixture")
var masterbat -> simPath("/controls/switches/master-bat")
var masterlat -> simPath("/controls/switches/master-alt")
var masteravionics -> simPath("/controls/switches/master-avionics")
var brakeparking -> simPath("/simPath/model/c172p/brake-parking")
var primer -> simPath("/controls/engines/engine/primer")
var starter -> simPath("/controls/switches/starter")
var autostart -> simPath("/engines/active-engine/auto-start")
var breaks -> simPath("/controls/flight/speedbrake")
var heading <- simPath("/instrumentation/heading-indicator/offset-deg")
var airspeed <- simPath("/instrumentation/airspeed-indicator/indicated-speed-kt")
var roll <- simPath("/instrumentation/attitude-indicator/indicated-roll-deg")
var pitch <- simPath("/instrumentation/attitude-indicator/internal-pitch-deg")
var rudder -> simPath("/controls/flight/rudder")
var aileron -> simPath("/controls/flight/aileron")
var elevator -> simPath("/controls/flight/elevator")
var alt <- simPath("/instrumentation/altimeter/indicated-altitude-ft")
var rpm <- simPath("/engines/engine/rpm")
Print("waiting 2 minutes for gui")
Sleep(1200)
Print("let's start")
warp = 32000
Sleep(1000)
magnetos = 3
throttle = 0.2
mixture = 0.949
masterbat = 1
masterlat = 1
masteravionics = 1
brakeparking = 0
primer = 3
starter = 1
autostart = 1
Print("engine is warming...")
Print(rpm)
while rpm <= 750 {
	Print(rpm)
}
Sleep(5000)
Print("let's fly")
var h0 = heading
breaks = 0
throttle = 1
while alt < 1000 {
	rudder = (h0 - heading)/80
	aileron = -roll / 70
	elevator = pitch / 50
	Sleep(250)
}
Print("done")